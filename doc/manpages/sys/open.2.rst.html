<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta charset="utf-8"/>
<meta name="generator" content="Docutils 0.14: http://docutils.sourceforge.net/" />
<title>open.2.rst</title>
<style type="text/css">

/* Minimal style sheet for the HTML output of Docutils.                    */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: minimal.css 8036 2017-02-14 13:05:46Z milde $               */
/* :Copyright: © 2015 Günter Milde.                                        */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*                                                                         */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */

/* This CSS2.1_ stylesheet defines rules for Docutils elements without    */
/* HTML equivalent. It is required to make the document semantic visible. */
/*                                                                        */
/* .. _CSS2.1: http://www.w3.org/TR/CSS2                                  */
/* .. _validates: http://jigsaw.w3.org/css-validator/validator$link       */

/* alignment of text and inline objects inside block objects*/
.align-left   { text-align: left; }
.align-right  { text-align: right; }
.align-center { clear: both; text-align: center; }
.align-top    { vertical-align: top; }
.align-middle { vertical-align: middle; }
.align-bottom { vertical-align: bottom; }

/* titles */
h1.title, p.subtitle {
  text-align: center;
}
p.admonition-title,
p.topic-title,
p.sidebar-title,
p.rubric,
p.system-message-title {
  font-weight: bold;
}
h1 + p.subtitle,
h1 + p.section-subtitle {
  font-size: 1.6em;
}
h2 + p.section-subtitle { font-size: 1.28em; }
p.subtitle,
p.section-subtitle,
p.sidebar-subtitle {
  font-weight: bold;
  margin-top: -0.5em;
}
p.sidebar-title,
p.rubric {
  font-size: larger;
}
p.rubric { color: maroon; }
a.toc-backref {
  color: black;
  text-decoration: none; }

/* Warnings, Errors */
div.caution p.admonition-title,
div.attention p.admonition-title,
div.danger p.admonition-title,
div.error p.admonition-title,
div.warning p.admonition-title,
div.system-messages h1,
div.error,
span.problematic,
p.system-message-title {
  color: red;
}

/* inline literals */
span.docutils.literal {
  font-family: monospace;
  white-space: pre-wrap;
}
/* do not wraph at hyphens and similar: */
.literal > span.pre { white-space: nowrap; }

/* Lists */

/* compact and simple lists: no margin between items */
.simple  li, .compact li,
.simple  ul, .compact ul,
.simple  ol, .compact ol,
.simple > li p, .compact > li p,
dl.simple > dd, dl.compact > dd {
  margin-top: 0;
  margin-bottom: 0;
}

/* Table of Contents */
div.topic.contents { margin: 0; }
ul.auto-toc {
  list-style-type: none;
  padding-left: 1.5em; }

/* Enumerated Lists */
ol.arabic     { list-style: decimal }
ol.loweralpha { list-style: lower-alpha }
ol.upperalpha { list-style: upper-alpha }
ol.lowerroman { list-style: lower-roman }
ol.upperroman { list-style: upper-roman }

dt span.classifier { font-style: italic }
dt span.classifier:before {
  font-style: normal;
  margin: 0.5em;
  content: ":";
}

/* Field Lists and drivatives */
/* bold field name, content starts on the same line */
dl.field-list > dt,
dl.option-list > dt,
dl.docinfo > dt,
dl.footnote > dt,
dl.citation > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.5em;
}
/* Offset for field content (corresponds to the --field-name-limit option) */
dl.field-list > dd,
dl.option-list > dd,
dl.docinfo > dd {
  margin-left:  9em; /* ca. 14 chars in the test examples */
}
/* start field-body on a new line after long field names */
dl.field-list > dd > *:first-child,
dl.option-list > dd > *:first-child
{
  display: inline-block;
  width: 100%;
  margin: 0;
}
/* field names followed by a colon */
dl.field-list > dt:after,
dl.docinfo > dt:after {
  content: ":";
}

/* Bibliographic Fields (docinfo) */
pre.address { font: inherit; }
dd.authors > p { margin: 0; }

/* Option Lists */
dl.option-list { margin-left: 40px; }
dl.option-list > dt { font-weight: normal; }
span.option { white-space: nowrap; }

/* Footnotes and Citations  */
dl.footnote.superscript > dd {margin-left: 1em; }
dl.footnote.brackets > dd {margin-left: 2em; }
dl > dt.label { font-weight: normal; }
a.footnote-reference.brackets:before,
dt.label > span.brackets:before { content: "["; }
a.footnote-reference.brackets:after,
dt.label > span.brackets:after { content: "]"; }
a.footnote-reference.superscript,
dl.footnote.superscript > dt.label {
  vertical-align: super;
  font-size: smaller;
}
dt.label > span.fn-backref { margin-left: 0.2em; }
dt.label > span.fn-backref > a { font-style: italic; }

/* Line Blocks */
div.line-block { display: block; }
div.line-block div.line-block {
  margin-top: 0;
  margin-bottom: 0;
  margin-left: 40px;
}

/* Figures, Images, and Tables */
.figure.align-left,
img.align-left,
object.align-left,
table.align-left {
  margin-right: auto;
}
.figure.align-center,
img.align-center,
object.align-center {
  margin-left: auto;
  margin-right: auto;
  display: block;
}
table.align-center {
  margin-left: auto;
  margin-right: auto;
}
.figure.align-right,
img.align-right,
object.align-right,
table.align-right {
  margin-left: auto;
}
/* reset inner alignment in figures and tables */
/* div.align-left, div.align-center, div.align-right, */
table.align-left, table.align-center, table.align-right
{ text-align: inherit }

/* Admonitions and System Messages */
div.admonition,
div.system-message,
div.sidebar{
  margin: 40px;
  border: medium outset;
  padding-right: 1em;
  padding-left: 1em;
}

/* Sidebar */
div.sidebar {
  width: 30%;
  max-width: 26em;
  float: right;
  clear: right;
}

/* Text Blocks */
div.topic,
pre.literal-block,
pre.doctest-block,
pre.math,
pre.code {
  margin-right: 40px;
  margin-left: 40px;
}
pre.code .ln { color: gray; } /* line numbers */

/* Tables */
table { border-collapse: collapse; }
td, th {
  border-style: solid;
  border-color: silver;
  padding: 0 1ex;
  border-width: thin;
}
td > p:first-child, th > p:first-child { margin-top: 0; }
td > p, th > p { margin-bottom: 0; }

table > caption {
  text-align: left;
  margin-bottom: 0.25em
}

table.borderless td, table.borderless th {
  border: 0;
  padding: 0;
  padding-right: 0.5em /* separate table cells */
}

</style>
<style type="text/css">

/* CSS31_ style sheet for the output of Docutils HTML writers.             */
/* Rules for easy reading and pre-defined style variants.		   */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: plain.css 8120 2017-06-22 21:02:40Z milde $               */
/* :Copyright: © 2015 Günter Milde.                                        */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*    	     	      	     	 					   */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */
/* .. _CSS3: http://www.w3.org/TR/CSS3		        		   */


/* Document Structure */
/* ****************** */

/* "page layout" */
body {
  padding: 0 5%;
  margin: 8px 0;
}
div.document {
  line-height:1.3;
  counter-reset: table;
  /* counter-reset: figure; */
  /* avoid long lines --> better reading */
  /* OTOH: lines should not be too short because of missing hyphenation, */
  max-width: 50em;
  margin: auto;
}

/* Sections */

/* Transitions */

hr.docutils {
  width: 80%;
  margin-top: 1em;
  margin-bottom: 1em;
  clear: both;
}

/* Paragraphs               */
/* ==========               */

/* vertical space (parskip) */
p, ol, ul, dl,
div.line-block,
table{
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}
h1, h2, h3, h4, h5, h6,
dl > dd {
  margin-bottom: 0.5em;
}

/* Lists                    */
/* ==========               */

/* Definition Lists         */

dl > dd > p:first-child { margin-top: 0; }
/* :last-child is not part of CSS 2.1 (introduced in CSS 3) */
dl > dd > p:last-child  { margin-bottom: 0; }

/* lists nested in definition lists */
/* :only-child is not part of CSS 2.1 (introduced in CSS 3) */
dd > ul:only-child, dd > ol:only-child { padding-left: 1em; }

/* Description Lists */
/* styled like in most dictionaries, encyclopedias etc. */
dl.description > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.5em;
}

/* Field Lists */

/* example for custom field-name width */
dl.field-list.narrow > dd {
  margin-left: 5em;
}
/* run-in: start field-body on same line after long field names */
dl.field-list.run-in > dd p {
  display: block;
}

/* Bibliographic Fields */

/* generally, bibliographic fields use special definition list dl.docinfo */
/* but dedication and abstract are placed into "topic" divs */
div.abstract p.topic-title {
  text-align: center;
}
div.dedication {
  margin: 2em 5em;
  text-align: center;
  font-style: italic;
}
div.dedication p.topic-title {
  font-style: normal;
}

/* Citations */
dl.citation dt.label {
  font-weight: bold;
}
span.fn-backref {
  font-weight: normal;
}

/* Text Blocks           */
/* ============          */

/* Literal Blocks           */
pre.literal-block, pre.doctest-block,
pre.math, pre.code {
  margin-left: 1.5em;
  margin-right: 1.5em
}

/* Block Quotes             */

blockquote,
div.topic {
  margin-left: 1.5em;
  margin-right: 1.5em
}
blockquote > table,
div.topic > table {
  margin-top: 0;
  margin-bottom: 0;
}
blockquote p.attribution,
div.topic p.attribution {
  text-align: right;
  margin-left: 20%;
}

/* Tables                   */
/* ======                   */

/* th { vertical-align: bottom; } */

table tr { text-align: left; }

/* "booktabs" style (no vertical lines) */
table.booktabs {
  border: 0;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.booktabs * {
  border: 0;
}
table.booktabs th {
  border-bottom: thin solid;
}

/* numbered tables (counter defined in div.document) */
table.numbered > caption:before {
  counter-increment: table;
  content: "Table " counter(table) ": ";
  font-weight: bold;
}

/* Explicit Markup Blocks   */
/* ======================   */

/* Footnotes and Citations  */
/* -----------------------  */

/* line on the left */
dl.footnote {
  padding-left: 1ex;
  border-left: solid;
  border-left-width: thin;
}

/* Directives               */
/* ----------               */

/* Body Elements            */
/* ~~~~~~~~~~~~~            */

/* Images and Figures */

/* let content flow to the side of aligned images and figures */
.figure.align-left,
img.align-left,
object.align-left {
  display: block;
  clear: left;
  float: left;
  margin-right: 1em
}
.figure.align-right,
img.align-right,
object.align-right {
  display: block;
  clear: right;
  float: right;
  margin-left: 1em
}
/* Stop floating sidebars, images and figures at section level 1,2,3 */
h1, h2, h3 { clear: both; }

/* Sidebar */

/* Move into the margin. In a layout with fixed margins, */
/* it can be moved into the margin completely.		 */
div.sidebar {
  width: 30%;
  max-width: 26em;
  margin-left: 1em;
  margin-right: -5.5%;
  background-color: #ffffee ;
}

/* Code                     */

pre.code, code { background-color: #eeeeee }
pre.code .ln { color: gray; } /* line numbers */
/* basic highlighting: for a complete scheme, see */
/* http://docutils.sourceforge.net/sandbox/stylesheets/ */
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

/* Math                     */
/* styled separately (see math.css for math-output=HTML) */

/* Epigraph                 */
/* Highlights               */
/* Pull-Quote               */
/* Compound Paragraph       */
/* Container                */

/* can be styled in a custom stylesheet */

/* Document Header and Footer */

div.footer, div.header {
  clear: both;
  font-size: smaller;
}

/* Inline Markup            */
/* =============            */

/* Emphasis                 */
/*   em                     */
/* Strong Emphasis          */
/*   strong		    */
/* Interpreted Text         */
/*   span.interpreted  	    */
/* Title Reference 	    */
/*   cite		    */
/* Inline Literals          */
/* possible values: normal, nowrap, pre, pre-wrap, pre-line */
/*   span.docutils.literal { white-space: pre-wrap; } */

/* Hyperlink References     */
a { text-decoration: none; }

/* External Targets         */
/*   span.target.external   */
/* Internal Targets  	    */
/*   span.target.internal   */
/* Footnote References      */
/*   a.footnote-reference   */
/* Citation References      */
/*   a.citation-reference   */

</style>
</head>
<body>
<div class="document">


<hr class="docutils" />
<p>OPEN(2) BSD System Calls Manual OPEN(2)</p>
<p><strong>NAME</strong></p>
<p><strong>open</strong>, <strong>openat</strong> — open or create a file for reading, writing or
executing</p>
<p><strong>LIBRARY</strong></p>
<p>Standard C Library (libc, −lc)</p>
<p><strong>SYNOPSIS</strong></p>
<p><strong>#include &lt;fcntl.h&gt;</strong></p>
<p><em>int</em></p>
<p><strong>open</strong>(<em>const char *path</em>, <em>int flags</em>, <em>...</em>);</p>
<p><em>int</em></p>
<p><strong>openat</strong>(<em>int fd</em>, <em>const char *path</em>, <em>int flags</em>, <em>...</em>);</p>
<p><strong>DESCRIPTION</strong></p>
<p>The file name specified by <em>path</em> is opened for either execution or
reading and/or writing as specified by the argument <em>flags</em> and the file
descriptor returned to the calling process. The <em>flags</em> argument may
indicate the file is to be created if it does not exist (by specifying
the O_CREAT flag). In this case <strong>open</strong>() and <strong>openat</strong>() require
an additional argument <em>mode_t mode</em>, and the file is created with mode
<em>mode</em> as described in chmod(2) and modified by the process’ umask value
(see umask(2)).</p>
<p>The <strong>openat</strong>() function is equivalent to the <strong>open</strong>() function
except in the case where the <em>path</em> specifies a relative path, or the
O_BENEATH flag is provided. For <strong>openat</strong>() and relative <em>path</em>, the
file to be opened is determined relative to the directory associated
with the file descriptor <em>fd</em> instead of the current working directory.
The <em>flag</em> parameter and the optional fourth parameter correspond
exactly to the parameters of <strong>open</strong>(). If <strong>openat</strong>() is passed
the special value AT_FDCWD in the <em>fd</em> parameter, the current working
directory is used and the behavior is identical to a call to
<strong>open</strong>().</p>
<p>When <strong>openat</strong>() is called with an absolute <em>path</em> without the
O_BENEATH flag, it ignores the <em>fd</em> argument. When O_BENEATH is
specified with an absolute <em>path</em>, a directory passed by the <em>fd</em>
argument is used as the topping point for the resolution. See the
definition of the O_BENEATH flag below.</p>
<p>In capsicum(4) capability mode, <strong>open</strong>() is not permitted. The
<em>path</em> argument to <strong>openat</strong>() must be strictly relative to a file
descriptor <em>fd</em>, as defined in <em>sys/kern/vfs_lookup.c</em>. <em>path</em> must not
be an absolute path and must not contain &quot;..&quot; components which cause the
path resolution to escape the directory hierarchy starting at <em>fd</em>.
Additionally, no symbolic link in <em>path</em> may target absolute path or
contain escaping &quot;..&quot; components. <em>fd</em> must not be AT_FDCWD.</p>
<p>If the vfs.lookup_cap_dotdot sysctl(3) MIB is set to zero, &quot;..&quot;
components in the paths, used in capability mode, or with the O_BENEATH
flag, are completely disabled. If the vfs.lookup_cap_dotdot_nonlocal MIB
is set to zero, &quot;..&quot; is not allowed if found on non-local filesystem.</p>
<p>The flags specified are formed by <em>or</em>’ing the following values</p>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr><td></td>
<td><p>O_RDONLY</p></td>
<td></td>
<td><p>open for
reading
only</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_WRONLY</p></td>
<td></td>
<td><p>open for
writing
only</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_RDWR</p></td>
<td></td>
<td><p>open for
reading and
writing</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_EXEC</p></td>
<td></td>
<td><p>open for
execute
only</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_NONBLOCK</p></td>
<td></td>
<td><p>do not
block on
open</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_APPEND</p></td>
<td></td>
<td><p>append on
each write</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_CREAT</p></td>
<td></td>
<td><p>create file
if it does
not exist</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_TRUNC</p></td>
<td></td>
<td><p>truncate
size to 0</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_EXCL</p></td>
<td></td>
<td><p>error if
create and
file exists</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_SHLOCK</p></td>
<td></td>
<td><p>atomically
obtain a
shared lock</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_EXLOCK</p></td>
<td></td>
<td><p>atomically
obtain an
exclusive
lock</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_DIRECT</p></td>
<td></td>
<td><p>eliminate
or reduce
cache
effects</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_FSYNC</p></td>
<td></td>
<td><p>synchronous
writes</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_SYNC</p></td>
<td></td>
<td><p>synchronous
writes</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_NOFOLLOW</p></td>
<td></td>
<td><p>do not
follow
symlinks</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_NOCTTY</p></td>
<td></td>
<td><p>ignored</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_TTY_INIT</p></td>
<td></td>
<td><p>ignored</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_DIRECTORY</p></td>
<td></td>
<td><p>error if
file is not
a directory</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_CLOEXEC</p></td>
<td></td>
<td><p>set
FD_CLOEXEC
upon open</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_VERIFY</p></td>
<td></td>
<td><p>verify the
contents of
the file</p></td>
<td></td>
</tr>
<tr><td></td>
<td><p>O_BENEATH</p></td>
<td></td>
<td><p>require
path to be
strictly
relative to
topping
directory</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>Opening a file with O_APPEND set causes each write on the file to be
appended to the end. If O_TRUNC is specified and the file exists, the
file is truncated to zero length. If O_EXCL is set with O_CREAT and the
file already exists, <strong>open</strong>() returns an error. This may be used to
implement a simple exclusive access locking mechanism. If O_EXCL is set
and the last component of the pathname is a symbolic link, <strong>open</strong>()
will fail even if the symbolic link points to a non-existent name. If
the O_NONBLOCK flag is specified and the <strong>open</strong>() system call would
result in the process being blocked for some reason (e.g., waiting for
carrier on a dialup line), <strong>open</strong>() returns immediately. The
descriptor remains in non-blocking mode for subsequent operations.</p>
<p>If O_FSYNC is used in the mask, all writes will immediately be written
to disk, the kernel will not cache written data and all writes on the
descriptor will not return until the data to be written completes.</p>
<p>O_SYNC is a synonym for O_FSYNC required by POSIX.</p>
<p>If O_NOFOLLOW is used in the mask and the target file passed to
<strong>open</strong>() is a symbolic link then the <strong>open</strong>() will fail.</p>
<p>When opening a file, a lock with flock(2) semantics can be obtained by
setting O_SHLOCK for a shared lock, or O_EXLOCK for an exclusive lock.
If creating a file with O_CREAT, the request for the lock will never
fail (provided that the underlying file system supports locking).</p>
<p>O_DIRECT may be used to minimize or eliminate the cache effects of
reading and writing. The system will attempt to avoid caching the data
you read or write. If it cannot avoid caching the data, it will minimize
the impact the data has on the cache. Use of this flag can drastically
reduce performance if not used with care.</p>
<p>O_NOCTTY may be used to ensure the OS does not assign this file as the
controlling terminal when it opens a tty device. This is the default on
FreeBSD, but is present for POSIX compatibility. The <strong>open</strong>() system
call will not assign controlling terminals on FreeBSD.</p>
<p>O_TTY_INIT may be used to ensure the OS restores the terminal attributes
when initially opening a TTY. This is the default on FreeBSD, but is
present for POSIX compatibility. The initial call to <strong>open</strong>() on a
TTY will always restore default terminal attributes on FreeBSD.</p>
<p>O_DIRECTORY may be used to ensure the resulting file descriptor refers
to a directory. This flag can be used to prevent applications with
elevated privileges from opening files which are even unsafe to open
with O_RDONLY, such as device nodes.</p>
<p>O_CLOEXEC may be used to set FD_CLOEXEC flag for the newly returned file
descriptor.</p>
<p>O_VERIFY may be used to indicate to the kernel that the contents of the
file should be verified before allowing the open to proceed. The details
of what ‘‘verified’’ means is implementation specific. The run-time
linker (rtld) uses this flag to ensure shared objects have been verified
before operating on them.</p>
<p>O_BENEATH returns ENOTCAPABLE if the specified relative path, after
resolving all symlinks and &quot;..&quot; references, does not reside in the
directory hierarchy of children beneath the topping directory. Topping
directory is the process current directory if relative <em>path</em> is used
for <strong>open</strong>(), and the directory referenced by the <em>fd</em> argument when
using <strong>openat</strong>(). If the specified path is absolute, O_BENEATH
allows arbitrary prefix that ends up at the topping directory, after
which all further resolved components must be under it.</p>
<p>If successful, <strong>open</strong>() returns a non-negative integer, termed a
file descriptor. It returns −1 on failure. The file pointer used to mark
the current position within the file is set to the beginning of the
file.</p>
<p>If a sleeping open of a device node from devfs(5) is interrupted by a
signal, the call always fails with EINTR, even if the SA_RESTART flag is
set for the signal. A sleeping open of a fifo (see mkfifo(2)) is
restarted as normal.</p>
<p>When a new file is created it is given the group of the directory which
contains it.</p>
<p>Unless O_CLOEXEC flag was specified, the new descriptor is set to remain
open across execve(2) system calls; see close(2), fcntl(2) and O_CLOEXEC
description.</p>
<p>The system imposes a limit on the number of file descriptors open
simultaneously by one process. The getdtablesize(2) system call returns
the current system limit.</p>
<p><strong>RETURN VALUES</strong></p>
<p>If successful, <strong>open</strong>() and <strong>openat</strong>() return a non-negative
integer, termed a file descriptor. They return −1 on failure, and set
<em>errno</em> to indicate the error.</p>
<p><strong>ERRORS</strong></p>
<p>The named file is opened unless:</p>
<p>[ENOTDIR]</p>
<p>A component of the path prefix is not a directory.</p>
<p>[ENAMETOOLONG]</p>
<p>A component of a pathname exceeded 255 characters, or an entire path
name exceeded 1023 characters.</p>
<p>[ENOENT]</p>
<p>O_CREAT is not set and the named file does not exist.</p>
<p>[ENOENT]</p>
<p>A component of the path name that must exist does not exist.</p>
<p>[EACCES]</p>
<p>Search permission is denied for a component of the path prefix.</p>
<p>[EACCES]</p>
<p>The required permissions (for reading and/or writing) are denied for the
given flags.</p>
<p>[EACCES]</p>
<p>O_TRUNC is specified and write permission is denied.</p>
<p>[EACCES]</p>
<p>O_CREAT is specified, the file does not exist, and the directory in
which it is to be created does not permit writing.</p>
<p>[EPERM]</p>
<p>O_CREAT is specified, the file does not exist, and the directory in
which it is to be created has its immutable flag set, see the chflags(2)
manual page for more information.</p>
<p>[EPERM]</p>
<p>The named file has its immutable flag set and the file is to be
modified.</p>
<p>[EPERM]</p>
<p>The named file has its append-only flag set, the file is to be modified,
and O_TRUNC is specified or O_APPEND is not specified.</p>
<p>[ELOOP]</p>
<p>Too many symbolic links were encountered in translating the pathname.</p>
<p>[EISDIR]</p>
<p>The named file is a directory, and the arguments specify it is to be
modified.</p>
<p>[EROFS]</p>
<p>The named file resides on a read-only file system, and the file is to be
modified.</p>
<p>[EROFS]</p>
<p>O_CREAT is specified and the named file would reside on a read-only file
system.</p>
<p>[EMFILE]</p>
<p>The process has already reached its limit for open file descriptors.</p>
<p>[ENFILE]</p>
<p>The system file table is full.</p>
<p>[EMLINK]</p>
<p>O_NOFOLLOW was specified and the target is a symbolic link.</p>
<p>[ENXIO]</p>
<p>The named file is a character special or block special file, and the
device associated with this special file does not exist.</p>
<p>[ENXIO]</p>
<p>O_NONBLOCK is set, the named file is a fifo, O_WRONLY is set, and no
process has the file open for reading.</p>
<p>[EINTR]</p>
<p>The <strong>open</strong>() operation was interrupted by a signal.</p>
<p>[EOPNOTSUPP]</p>
<p>O_SHLOCK or O_EXLOCK is specified but the underlying file system does
not support locking.</p>
<p>[EOPNOTSUPP]</p>
<p>The named file is a special file mounted through a file system that does
not support access to it (e.g. NFS).</p>
<p>[EWOULDBLOCK]</p>
<p>O_NONBLOCK and one of O_SHLOCK or O_EXLOCK is specified and the file is
locked.</p>
<p>[ENOSPC]</p>
<p>O_CREAT is specified, the file does not exist, and the directory in
which the entry for the new file is being placed cannot be extended
because there is no space left on the file system containing the
directory.</p>
<p>[ENOSPC]</p>
<p>O_CREAT is specified, the file does not exist, and there are no free
inodes on the file system on which the file is being created.</p>
<p>[EDQUOT]</p>
<p>O_CREAT is specified, the file does not exist, and the directory in
which the entry for the new file is being placed cannot be extended
because the user’s quota of disk blocks on the file system containing
the directory has been exhausted.</p>
<p>[EDQUOT]</p>
<p>O_CREAT is specified, the file does not exist, and the user’s quota of
inodes on the file system on which the file is being created has been
exhausted.</p>
<p>[EIO]</p>
<p>An I/O error occurred while making the directory entry or allocating the
inode for O_CREAT.</p>
<p>[ETXTBSY]</p>
<p>The file is a pure procedure (shared text) file that is being executed
and the <strong>open</strong>() system call requests write access.</p>
<p>[EFAULT]</p>
<p>The <em>path</em> argument points outside the process’s allocated address
space.</p>
<p>[EEXIST]</p>
<p>O_CREAT and O_EXCL were specified and the file exists.</p>
<p>[EOPNOTSUPP]</p>
<p>An attempt was made to open a socket (not currently implemented).</p>
<p>[EINVAL]</p>
<p>An attempt was made to open a descriptor with an illegal combination of
O_RDONLY, O_WRONLY, O_RDWR and O_EXEC.</p>
<p>[EBADF]</p>
<p>The <em>path</em> argument does not specify an absolute path and the <em>fd</em>
argument is neither AT_FDCWD nor a valid file descriptor open for
searching.</p>
<p>[ENOTDIR]</p>
<p>The <em>path</em> argument is not an absolute path and <em>fd</em> is neither AT_FDCWD
nor a file descriptor associated with a directory.</p>
<p>[ENOTDIR]</p>
<p>O_DIRECTORY is specified and the file is not a directory.</p>
<p>[ECAPMODE]</p>
<p>AT_FDCWD is specified and the process is in capability mode.</p>
<p>[ECAPMODE]</p>
<p><strong>open</strong>() was called and the process is in capability mode.</p>
<p>[ENOTCAPABLE]</p>
<p><em>path</em> is an absolute path, or contained a &quot;..&quot; component leading to a
directory outside of the directory hierarchy specified by <em>fd</em>, and the
process is in capability mode.</p>
<p>[ENOTCAPABLE]</p>
<p>The O_BENEATH flag was provided, and the absolute <em>path</em> does not have
its tail fully contained under the topping directory, or the relative
<em>path</em> escapes it.</p>
<p><strong>SEE ALSO</strong></p>
<p>chmod(2), close(2), dup(2), fexecve(2), fhopen(2), getdtablesize(2),
getfh(2), lgetfh(2), lseek(2), read(2), umask(2), write(2), fopen(3),
capsicum(4)</p>
<p><strong>STANDARDS</strong></p>
<p>These functions are specified by IEEE Std 1003.1-2008 (‘‘POSIX.1’’).
FreeBSD sets <em>errno</em> to EMLINK instead of ELOOP as specified by POSIX
when O_NOFOLLOW is set in flags and the final component of pathname is a
symbolic link to distinguish it from the case of too many symbolic link
traversals in one of its non-final components.</p>
<p><strong>HISTORY</strong></p>
<p>The <strong>open</strong>() function appeared in Version 1 AT&amp;T UNIX. The
<strong>openat</strong>() function was introduced in FreeBSD 8.0.</p>
<p><strong>BUGS</strong></p>
<p>The Open Group Extended API Set 2 specification requires that the test
for whether <em>fd</em> is searchable is based on whether <em>fd</em> is open for
searching, not whether the underlying directory currently permits
searches. The present implementation of the <em>openat</em> checks the current
permissions of directory instead.</p>
<p>BSD November 11, 2018 BSD</p>
<hr class="docutils" />
<!-- Copyright (c) 1990, 1991, 1993 -->
<!-- The Regents of the University of California.  All rights reserved. -->
<!--  -->
<!-- This code is derived from software contributed to Berkeley by -->
<!-- Chris Torek and the American National Standards Committee X3, -->
<!-- on Information Processing Systems. -->
<!--  -->
<!-- Redistribution and use in source and binary forms, with or without -->
<!-- modification, are permitted provided that the following conditions -->
<!-- are met: -->
<!-- 1. Redistributions of source code must retain the above copyright -->
<!-- notice, this list of conditions and the following disclaimer. -->
<!-- 2. Redistributions in binary form must reproduce the above copyright -->
<!-- notice, this list of conditions and the following disclaimer in the -->
<!-- documentation and/or other materials provided with the distribution. -->
<!-- 3. Neither the name of the University nor the names of its contributors -->
<!-- may be used to endorse or promote products derived from this software -->
<!-- without specific prior written permission. -->
<!--  -->
<!-- THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND -->
<!-- ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE -->
<!-- IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE -->
<!-- ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE -->
<!-- FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL -->
<!-- DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS -->
<!-- OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) -->
<!-- HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT -->
<!-- LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY -->
<!-- OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF -->
<!-- SUCH DAMAGE. -->
</div>
</body>
</html>
